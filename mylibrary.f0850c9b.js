!function(){var e={watchedId:[]},t={queueId:[]};function n(){null===localStorage.getItem("queue")?t.watchedId=[]:t.queueId=JSON.parse(localStorage.getItem("queue")).queueId}function a(){null===localStorage.getItem("watched")?e.watchedId=[]:e.watchedId=JSON.parse(localStorage.getItem("watched")).watchedId}n(),a();var c=function(n){var a=document.querySelector(".modalw"),c=n.title;console.log(c);var d=n.popularity.toFixed(1),o=n.vote_average.toFixed(1),l=n.genres.map((function(e){return e.name})).join(", "),s='\n      <div class="modal-header">\n        \n        <button class="modal-close">&times;</button>\n      </div>\n      <div class=\'poster_container\'>\n        <img class="modal-poster" src="https://image.tmdb.org/t/p/w500'.concat(n.poster_path,'" alt="').concat(n.title,'">\n      </div>\n      <div class=\'info\'>\n        <h3 class="modal-title">').concat(c,"</h3>\n\n        <table>\n          <tr>\n            <th class='t1'>Vote / Votes</th>\n            <th><span class='films__rate'>").concat(o,"</span> / ").concat(n.vote_count,"</th>\n          </tr>\n          <tr>\n            <th class='t1'>Popularity</th>\n            <th>").concat(d,"</th>\n          </tr>\n          <tr>\n            <th class='t1'>Original Title</th>\n            <th>").concat(n.original_title,"</th>\n          </tr>\n          <tr>\n            <th class='t1'>Genre</th>\n            <th>").concat(l,"</th>\n          </tr>\n        </table>\n          <p>ABOUT</p>\n          <p class='about'>").concat(n.overview,'</p>\n          <div class="modal-btns">\n            <button class="addw">ADD TO WATCHED</button>\n            <button class="addq">ADD TO QUEUE</button>\n        </div>\n      </div>\n    '),i=document.createElement("div");i.innerHTML=s,i.classList.add("modal-content"),a.appendChild(i),a.style.display="flex",i.querySelector(".modal-close").addEventListener("click",(function(){a.style.display="none",i.remove()}));var r=e.watchedId,u=t.queueId,m=i.querySelector(".addw");r.includes(n.id)&&(m.style.backgroundColor="rgba(255, 107, 1, 0.5)"),u.includes(n.id),m.disabled=r.includes(n.id),m.addEventListener("click",(function(){r.push(n.id),localStorage.setItem("watched",JSON.stringify(e)),m.style.backgroundColor="rgba(255, 107, 1, 0.5)",m.disabled=r.includes(n.id),p.disabled=u.includes(n.id)||r.includes(n.id),console.log(localStorage)}));var p=i.querySelector(".addq");p.disabled=u.includes(n.id)||r.includes(n.id),p.addEventListener("click",(function(){u.push(n.id),localStorage.setItem("queue",JSON.stringify(t)),p.disabled=u.includes(n.id)||r.includes(n.id),console.log(localStorage)})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(a.style.display="none",i.remove())})),document.addEventListener("click",(function(e){e.target===a&&(a.style.display="none",i.remove())}))},d=document.querySelector(".films");var o=function(e){var t=e.poster_path?"https://image.tmdb.org/t/p/w500".concat(e.poster_path):"https://via.placeholder.com/500x750?text=No+poster+available",n=e.title.toUpperCase(),a=e.vote_average.toFixed(1),o=e.release_date.slice(0,4),l=e.genres.map((function(e){return e.name})).join(", "),s=document.createElement("div");s.classList.add("films__card");var i="\n    <img class='films__poster' src=".concat(t," alt=").concat(n," loading='lazy' class='poster'>\n    <p class='films__title'>").concat(n,"</p>\n    <p class='films__details'>").concat(l," | ").concat(o,"</p>\n    <div class='films__rate'>").concat(a,"</div>\n    ");s.innerHTML=i,d.appendChild(s),s.addEventListener("click",(function(){c(e)}))},l=document.querySelector(".watched"),s=document.querySelector(".queue"),i=document.querySelector(".films"),r=document.querySelector(".msn"),u=document.querySelector(".pages"),m=document.querySelector(".screen");console.log(localStorage),n(),a();var p=t.queueId,v=e.watchedId;p=null===localStorage.getItem("queue")?[]:JSON.parse(localStorage.getItem("queue")).queueId,v=null===localStorage.getItem("watched")?[]:JSON.parse(localStorage.getItem("watched")).watchedId;function h(e,t){if(0===e.length)r.textContent="No movies have been added to Watched list yet";else{var n=12*(t-1),a=n+12,c=e.slice(n,a);i.innerHTML="",c.forEach((function(e){m.style.display="flex",fetch("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat("0a3a4e00d84de20a8f1b6dfc8a7cdfd5","&language=en-US")).then((function(e){return e.json()})).then((function(e){return o(e)})).catch((function(e){return console.error(e)})).finally((function(){return m.style.display="none"}))})),b(v,g,1)}}var g=Math.ceil(v.length/12),f=Math.ceil(p.length/12),b=function(e,t,n){var a=function(a){var c=document.createElement("button");c.classList.add("page"),c.textContent=a,c.disabled=a===n,a===n?c.classList.add("activePage"):c.classList.remove("activePage"),c.addEventListener("click",(function(){h(e,n=a),b(e,t,n)})),u.append(c)};u.innerHTML="";var c=document.createElement("button");c.textContent="←",c.classList.add("pagebtn"),c.disabled=1===n,c.addEventListener("click",(function(){n--,h(e,n),b(e,t,n)})),u.append(c);var d=document.createElement("button");d.textContent="1",d.classList.add("page"),d.disabled=1===n,d.addEventListener("click",(function(){h(e,n=1),b(e,t,n)})),u.append(d);var o=document.createElement("div");o.textContent="...",o.classList.add("dots"),u.append(o);var l,s=Math.max(n-Math.floor(2.5),1),i=Math.max(n-5+1,1),r=Math.max(n-5+2,1);l=n===t?i:n===t-1?r:s;for(var m=Math.min(l+5-1,t),p=l;p<=m;p++)a(p);var v=document.createElement("div");v.textContent="...",v.classList.add("dots"),u.append(v);var g=document.createElement("button");g.textContent=t,g.classList.add("page"),g.disabled=n===t,g.addEventListener("click",(function(){h(e,n=t),b(e,t,n)})),u.append(g);var f=document.createElement("button");f.textContent="→",f.classList.add("pagebtn"),f.disabled=n===t,f.addEventListener("click",(function(){n++,h(e,n),b(e,t,n)})),u.append(f)};l.addEventListener("click",(function(e){e.preventDefault(),l.classList.add("selected"),s.classList.remove("selected"),0===v.length?(i.innerHTML="",r.textContent="No movies have been added to Watched list yet",u.innerHTML=""):(h(v,1),b(v,g,1))})),s.addEventListener("click",(function(e){e.preventDefault(),s.classList.add("selected"),l.classList.remove("selected"),0===p.length?(i.innerHTML="",r.textContent="No movies have been added to Queue list yet",u.innerHTML=""):(h(p,1),b(p,f,1))})),u.innerHTML="",h(v,1)}();
//# sourceMappingURL=mylibrary.f0850c9b.js.map
