!function(){var e={watchedId:[]},t={queueId:[]};function n(){null===localStorage.getItem("queue")?t.watchedId=[]:t.queueId=JSON.parse(localStorage.getItem("queue")).queueId}function a(){null===localStorage.getItem("watched")?e.watchedId=[]:e.watchedId=JSON.parse(localStorage.getItem("watched")).watchedId}n(),a();var o=function(n){var a=document.querySelector(".modalw"),o=(n.title||n.name).toUpperCase(),c=(n.original_title||n.name).toUpperCase(),l=n.popularity.toFixed(1),d=n.vote_average.toFixed(1),s=n.genres.map((function(e){return e.name})).join(", "),i='\n      <div class="modal-header">\n        \n        <button class="modal-close">&times;</button>\n      </div>\n      <div class=\'poster_container\'>\n        <img class="modal-poster" src="https://image.tmdb.org/t/p/w500'.concat(n.poster_path,'" alt="').concat(n.title,'">\n      </div>\n      <div class=\'info\'>\n        <h3 class="modal-title">').concat(o,"</h3>\n\n        <table>\n          <tr>\n            <th class='t1'>Vote / Votes</th>\n            <th><span class='films__rate'>").concat(d,"</span> / ").concat(n.vote_count,"</th>\n          </tr>\n          <tr>\n            <th class='t1'>Popularity</th>\n            <th>").concat(l,"</th>\n          </tr>\n          <tr>\n            <th class='t1'>Original Title</th>\n            <th>").concat(c,"</th>\n          </tr>\n          <tr>\n            <th class='t1'>Genre</th>\n            <th>").concat(s,"</th>\n          </tr>\n        </table>\n          <p>ABOUT</p>\n          <p class='about'>").concat(n.overview,'</p>\n          <div class="modal-btns">\n            <button class="btnmodal addw">ADD TO WATCHED</button>\n            <button class="btnmodal addq">ADD TO QUEUE</button>\n        </div>\n      </div>\n    '),r=document.createElement("div");r.innerHTML=i,r.classList.add("modal-content"),a.appendChild(r),a.style.display="flex",r.querySelector(".modal-close").addEventListener("click",(function(){a.style.display="none",r.remove()}));var u=e.watchedId,m=t.queueId,v=r.querySelector(".addw"),p=r.querySelector(".addq");u.includes(n.id)?(v.classList.add("btnmodal2"),v.classList.remove("btnmodal"),v.textContent="REMOVE FROM WATCHED",v.addEventListener("click",(function(){var t=u.indexOf(n.id);u.splice(t,1),localStorage.setItem("watched",JSON.stringify(e)),v.classList.add("btnmodal"),v.classList.remove("btnmodal2"),v.textContent="ADD TO WATCHED",window.location.reload(),console.log(localStorage)}))):v.addEventListener("click",(function(){if(u.push(n.id),localStorage.setItem("watched",JSON.stringify(e)),m.includes(n.id)){var a=m.indexOf(n.id);m.splice(a,1),localStorage.setItem("queue",JSON.stringify(t))}v.classList.add("btnmodal2"),v.classList.remove("btnmodal"),v.textContent="REMOVE FROM WATCHED",window.location.reload(),console.log(localStorage)})),m.includes(n.id)?(p.classList.add("btnmodal2"),p.classList.remove("btnmodal"),p.textContent="REMOVE FROM QUEUE",p.addEventListener("click",(function(){var e=m.indexOf(n.id);m.splice(e,1),localStorage.setItem("queue",JSON.stringify(t)),p.classList.add("btnmodal"),p.classList.remove("btnmodal2"),p.textContent="ADD TO QUEUE",window.location.reload(),console.log(localStorage)}))):p.addEventListener("click",(function(){if(m.push(n.id),localStorage.setItem("queue",JSON.stringify(t)),p.classList.add("btnmodal2"),p.classList.remove("btnmodal"),p.textContent="REMOVE FORM QUEUE",u.includes(n.id)){var a=u.indexOf(n.id);u.splice(a,1),localStorage.setItem("watched",JSON.stringify(e))}window.location.reload(),console.log(localStorage)})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(a.style.display="none",r.remove())})),document.addEventListener("click",(function(e){e.target===a&&(a.style.display="none",r.remove())}))},c=document.querySelector(".films");var l=function(e){var t=e.poster_path?"https://image.tmdb.org/t/p/w500".concat(e.poster_path):"https://via.placeholder.com/500x750?text=No+poster+available",n=e.title.toUpperCase(),a=e.vote_average.toFixed(1),l=e.release_date.slice(0,4),d=e.genres.map((function(e){return e.name})).join(", "),s=document.createElement("div");s.classList.add("films__card");var i="\n    <img class='films__poster' src=".concat(t," alt=").concat(n," loading='lazy' class='poster'>\n    <p class='films__title'>").concat(n,"</p>\n    <p class='films__details'>").concat(d," | ").concat(l,"</p>\n    <div class='films__rate'>").concat(a,"</div>\n    ");s.innerHTML=i,c.appendChild(s),s.addEventListener("click",(function(){o(e)}))},d=document.querySelector(".watched"),s=document.querySelector(".queue"),i=document.querySelector(".films"),r=document.querySelector(".msn"),u=document.querySelector(".pages"),m=document.querySelector(".screen");console.log(localStorage),n(),a();var v=t.queueId,p=e.watchedId;v=null===localStorage.getItem("queue")?[]:JSON.parse(localStorage.getItem("queue")).queueId,p=null===localStorage.getItem("watched")?[]:JSON.parse(localStorage.getItem("watched")).watchedId;function h(e,t){if(0===e.length)r.textContent="No movies have been added to Watched list yet";else{var n=12*(t-1),a=n+12,o=e.slice(n,a);i.innerHTML="",o.forEach((function(e){m.style.display="flex",fetch("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat("0a3a4e00d84de20a8f1b6dfc8a7cdfd5","&language=en-US")).then((function(e){return e.json()})).then((function(e){return l(e)})).catch((function(e){return console.error(e)})).finally((function(){return m.style.display="none"}))})),L(p,g,1)}}var g=Math.ceil(p.length/12),f=Math.ceil(v.length/12),L=function(e,t,n){var a=function(a){var o=document.createElement("button");o.classList.add("page"),o.textContent=a,o.disabled=a===n,a===n?o.classList.add("activePage"):o.classList.remove("activePage"),o.addEventListener("click",(function(){h(e,n=a),L(e,t,n)})),u.append(o)};u.innerHTML="";var o=document.createElement("button");o.textContent="←",o.classList.add("pagebtn"),o.disabled=1===n,o.addEventListener("click",(function(){n--,h(e,n),L(e,t,n)})),u.append(o);var c=document.createElement("button");c.textContent="1",c.classList.add("page"),c.disabled=1===n,c.addEventListener("click",(function(){h(e,n=1),L(e,t,n)})),u.append(c);var l=document.createElement("div");l.textContent="...",l.classList.add("dots"),u.append(l);var d,s=Math.max(n-Math.floor(2.5),1),i=Math.max(n-5+1,1),r=Math.max(n-5+2,1);d=n===t?i:n===t-1?r:s;for(var m=Math.min(d+5-1,t),v=d;v<=m;v++)a(v);var p=document.createElement("div");p.textContent="...",p.classList.add("dots"),u.append(p);var g=document.createElement("button");g.textContent=t,g.classList.add("page"),g.disabled=n===t,g.addEventListener("click",(function(){h(e,n=t),L(e,t,n)})),u.append(g);var f=document.createElement("button");f.textContent="→",f.classList.add("pagebtn"),f.disabled=n===t,f.addEventListener("click",(function(){n++,h(e,n),L(e,t,n)})),u.append(f)};d.addEventListener("click",(function(e){e.preventDefault(),d.classList.add("selected"),s.classList.remove("selected"),0===p.length?(i.innerHTML="",r.textContent="No movies have been added to Watched list yet",u.innerHTML=""):(h(p,1),L(p,g,1))})),s.addEventListener("click",(function(e){e.preventDefault(),s.classList.add("selected"),d.classList.remove("selected"),0===v.length?(i.innerHTML="",r.textContent="No movies have been added to Queue list yet",u.innerHTML=""):(h(v,1),L(v,f,1))})),u.innerHTML="",h(p,1)}();
//# sourceMappingURL=mylibrary.d0d48da2.js.map
