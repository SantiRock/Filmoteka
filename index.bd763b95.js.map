{"mappings":"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","sources":["src/js/index.js","src/js/homecard.js","src/js/genres.js","src/js/modal.js"],"sourcesContent":["require('dotenv').config();\nimport makeMoviesPosters from './homecard.js';\nimport '../sass/index.scss';\n\n// Variables ----\n//const apiKey = process.env.API_KEY;\nconst apiKey = \"0a3a4e00d84de20a8f1b6dfc8a7cdfd5\";\nconst media_type = 'movie';\nconst time_window = 'week';\nlet currentPage = 1;\nlet totalPages = 500;\nconst screen = document.querySelector('.screen');\n\n// Fetch & Render ----\nfunction uploadMovies() {\n  screen.style.display = 'flex';\n  return fetch(\n    `https://api.themoviedb.org/3/trending/${media_type}/${time_window}?api_key=${apiKey}&per_page=18&page=${currentPage}`\n  ).then(response => {\n    if (!response.ok) {\n      screen.style.display = 'none';\n      throw new Error(response.status);\n    }\n    return response.json();\n  })\n  .finally(() => screen.style.display = 'none')\n}\n\nconst render = () => {\n  uploadMovies().then(trendingMovies => {\n    //totalPages = trendingMovies.total_pages;\n    return makeMoviesPosters(trendingMovies);\n  });\n};\n\nrender();\n\n// Paginación ----\n\nconst pages = document.querySelector('.pages');\nconst pagesToShow = 5;\n\nconst paginationH = () => {\n    pages.innerHTML = '';\n\n    const prevBtn = document.createElement('button');\n    prevBtn.textContent = '←';\n    prevBtn.classList.add('pagebtn');\n    prevBtn.disabled = currentPage === 1;\n    prevBtn.addEventListener('click', () => {\n        currentPage--;\n        render();\n        paginationH();\n    });\n    pages.append(prevBtn);\n\n    if( currentPage > 3) {\n    const first = document.createElement('button');\n    first.textContent = '1';\n    first.classList.add('page');\n    first.disabled = currentPage === 1;\n    first.addEventListener('click', () => {\n      currentPage = 1;\n      render();\n      paginationH();\n    });\n    pages.append(first);\n    }\n\n    if( currentPage > 4) {\n      const dots = document.createElement('div');\n      dots.textContent = '...';\n      dots.classList.add('dots');\n      pages.append(dots);\n    }\n\n    const st1 = Math.max(currentPage - Math.floor(pagesToShow/2), 1);\n    const st2 = Math.max(currentPage - pagesToShow + 1, 1);\n    const st3 = Math.max(currentPage - pagesToShow + 2, 1);\n\n    let startPage;\n    currentPage === totalPages ? startPage = st2 \n    : currentPage === totalPages - 1 ? startPage = st3 : startPage = st1;\n\n    const endPage = Math.min(startPage + pagesToShow - 1, totalPages);\n    for(let i = startPage; i <= endPage; i++) {\n      const pageButton = document.createElement('button');\n      pageButton.classList.add('page');\n      pageButton.textContent = i;\n      pageButton.disabled = i === currentPage;\n\n      i === currentPage ? pageButton.classList.add('activePage') : pageButton.classList.remove('activePage');\n\n      pageButton.addEventListener('click', () => {\n        currentPage = i;\n        render();\n        paginationH();\n      });\n      pages.append(pageButton);\n    };\n\n    if( currentPage < 497 ){\n    const dots1 = document.createElement('div');\n    dots1.textContent = '...';\n    dots1.classList.add('dots');\n    pages.append(dots1);\n\n    }\n\n    if(currentPage < 498) {\n      const last = document.createElement('button');\n      last.textContent = totalPages;\n      last.classList.add('page');\n      last.disabled = currentPage === totalPages\n      last.addEventListener('click', () => {\n        currentPage = totalPages;\n        render();\n        paginationH();\n      });\n      pages.append(last);\n    }\n\n    const nextBtn = document.createElement('button');\n    nextBtn.textContent = '→';\n    nextBtn.classList.add('pagebtn');\n    nextBtn.disabled = currentPage === totalPages;\n    nextBtn.addEventListener('click', () => {\n        currentPage++;\n        render();\n        paginationH();\n    });\n    pages.append(nextBtn);\n}\n\npaginationH();\n\nexport { render, paginationH};\n\n","import { genresArr, loadGenres } from \"./genres\";\nimport displayMovieDetails from './modal';\n\n\nconst filmsContainer = document.querySelector('.films');\nconst moviesPerPage = 18;\n\n// Diseño de tarjetas (posters)\n\nfunction makeMoviesPosters(arr) {\n  filmsContainer.innerHTML = '';\n\n  if (genresArr.length === 0) {\n    loadGenres().then(() => {\n      makeMoviesPosters(arr);\n    });\n  }\n\n  const moviesToDisplay = arr.results.slice(0, moviesPerPage);\n \n  const moviesList = moviesToDisplay\n    .map(movie => {\n      const genreNames = movie.genre_ids;\n      const names = [];\n  \n      for (let i = 0; i < genreNames.length; i++) {\n        let genre = genresArr.find(g => g.id === genreNames[i]);\n        if (genre) {\n          names.push(genre.name);\n        } else { \n          continue;\n        }\n      }\n      const gNames = names.join(', ');\n\n      const posterPath = movie.poster_path ? `https://image.tmdb.org/t/p/w500${movie.poster_path}` \n        : 'https://via.placeholder.com/500x750?text=No+poster+available';\n\n      const filmCard = document.createElement('div');\n      filmCard.classList.add('films__card');\n      filmCard.innerHTML = `\n        <img class= \"films__poster\" src=${posterPath}></> \n        <p class= \"films__title\">${movie.title || movie.name}</p>\n        <p class= \"films__details\">${gNames} | ${\n        (movie.release_date && movie.release_date.slice(0, 4)) ||\n        movie.first_air_date.slice(0, 4)\n      }</p>\n        <div class='films__rate'>${movie.vote_average.toFixed(1)}</div>\n    `;\n    filmsContainer.appendChild(filmCard);\n    filmCard.addEventListener(\"click\", () => {\n      displayMovieDetails(movie);\n      })\n    })\n    .join('');\n}\n\nexport default makeMoviesPosters;\n","require('dotenv').config();\nconst apiKey = process.env.API_KEY;\n\nlet genresArr = [];\n\nfunction loadGenres() {\n    return fetch(\n      `https://api.themoviedb.org/3/genre/movie/list?api_key=${apiKey}&language=en-US`\n    )\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.status);\n        }\n        return response.json();\n      })\n      .then(array => {\n        genresArr = array.genres;\n        return genresArr;\n      });\n  }\n\n  export { genresArr, loadGenres};","import { watchedLocalStorage } from \"./localstorage\";\nimport { genresArr } from \"./genres\";\n\n\nfunction displayMovieDetails(movie) {\n  const modal = document.querySelector(\".modalw\");\n  const title1 = movie.title || movie.name;\n  const title = title1.toUpperCase();\n  const orgtitle1 = movie.original_title || movie.name;\n  const orgtitle = orgtitle1.toUpperCase();\n  const popularity = movie.popularity.toFixed(1);\n  const rate = movie.vote_average.toFixed(1);\n  const year = movie.release_date && movie.release_date.slice(0, 4) || movie.first_air_date.slice(0, 4);\n\n\n  const genreNames = movie.genre_ids;\n      const names = [];\n  \n      for (let i = 0; i < genreNames.length; i++) {\n        let genre = genresArr.find(g => g.id === genreNames[i]);\n        if (genre) {\n          names.push(genre.name);\n        } else { \n          continue;\n        }\n      }\n      const gNames = names.join(', ');\n    \n    const modalContent = `\n      <div class=\"modal-header\">\n        \n        <button class=\"modal-close\">&times;</button>\n      </div>\n      <div class='poster_container'>\n        <img class=\"modal-poster\" src=\"https://image.tmdb.org/t/p/w500${\n          movie.poster_path\n        }\" alt=\"${title}\">\n      </div>\n      <div class='info'>\n        <h3 class=\"modal-title\">${title}</h3>\n\n        <table>\n          <tr>\n            <th class='t1'>Vote / Votes</th>\n            <th><span class='films__rate'>${rate}</span> / ${movie.vote_count}</th>\n          </tr>\n          <tr>\n            <th class='t1'>Popularity</th>\n            <th>${popularity}</th>\n          </tr>\n          <tr>\n            <th class='t1'>Original Title</th>\n            <th>${orgtitle}</th>\n          </tr>\n          <tr>\n            <th class='t1'>Year</th>\n            <th>${year}</th>\n          </tr>\n          <tr>\n            <th class='t1'>Genre</th>\n            <th>${gNames}</th>\n          </tr>\n        </table>\n          <p>ABOUT</p>\n          <p class='about'>${movie.overview}</p>\n          <div class=\"modal-btns\">\n            <button class=\"btnmodal addw\">ADD TO LIBRARY</button>\n        </div>\n      </div>\n    `;\n\n    const modalContentWrapper = document.createElement(\"div\");\n    modalContentWrapper.innerHTML = modalContent;\n    modalContentWrapper.classList.add(\"modal-content\");\n    modal.appendChild(modalContentWrapper);\n    modal.style.display = \"flex\";\n  \n    const closeButton = modalContentWrapper.querySelector(\".modal-close\");\n    closeButton.addEventListener(\"click\", () => {\n      modal.style.display = \"none\";\n      modalContentWrapper.remove();\n    });\n\n    const wls = watchedLocalStorage.watchedId;\n\n    const watchButton = modalContentWrapper.querySelector(\".addw\");\n    //console.log(wls.includes(movie.id));\n\n    if (wls.includes(movie.id)) {\n      watchButton.classList.add('btnmodal2')\n      watchButton.classList.remove('btnmodal');\n      watchButton.textContent = 'REMOVE FROM WATCHED';\n      watchButton.addEventListener('click', () => {\n        const i = wls.indexOf(movie.id);\n        wls.splice(i, 1);\n        localStorage.setItem('watched', JSON.stringify(watchedLocalStorage));\n        watchButton.classList.add('btnmodal')\n        watchButton.classList.remove('btnmodal2');\n        watchButton.textContent = 'ADD TO LIBRARY';\n        modal.style.display = 'none';\n        modalContentWrapper.remove();\n        //console.log(localStorage);\n      });} else {\n        watchButton.addEventListener(\"click\", () => {\n          wls.push(movie.id);\n          localStorage.setItem('watched', JSON.stringify(watchedLocalStorage));\n          watchButton.classList.add('btnmodal2')\n          watchButton.classList.remove('btnmodal');\n          watchButton.textContent = 'REMOVE FROM LIBRARY'; \n          modal.style.display = 'none';\n          modalContentWrapper.remove();\n          //console.log(localStorage);\n        });\n      };\n\n    document.addEventListener('keydown', event => {\n      if (event.key === 'Escape') {\n        modal.style.display = 'none';\n        modalContentWrapper.remove();\n      }\n    });\n\n    document.addEventListener('click', (event) => {\n      if (event.target === modal) {\n        modal.style.display = 'none';\n        modalContentWrapper.remove();\n      }\n    })\n  }\n\n  export default displayMovieDetails;\n\n\n\n"],"names":["$4iEUr","parcelRequire","config","$44ae6d9db4eaca0f$var$currentPage","$44ae6d9db4eaca0f$var$totalPages","$44ae6d9db4eaca0f$var$screen","document","querySelector","$44ae6d9db4eaca0f$export$b3890eb0ae9dca99","style","display","fetch","concat","then","response","ok","Error","status","json","finally","trendingMovies","default","$44ae6d9db4eaca0f$var$pages","$44ae6d9db4eaca0f$export$3e54f7e56561fb8a","pageButton","createElement","classList","add","textContent","i","disabled","remove","addEventListener","append","innerHTML","prevBtn","first","dots","startPage","st1","Math","max","floor","$44ae6d9db4eaca0f$var$pagesToShow","st2","st3","endPage","min","i1","_loop","dots1","last","nextBtn","$twtVq","$32189398d2b447c4$var$filmsContainer","$32189398d2b447c4$export$2e2bcd8739ae039","$32189398d2b447c4$var$makeMoviesPosters","arr","genresArr","length","loadGenres","results","slice","map","movie","genre","find","g","id","genreNames","names","push","name","genre_ids","gNames","join","posterPath","poster_path","filmCard","title","release_date","first_air_date","vote_average","toFixed","appendChild","$5xtVg","$058be7baf2d85bd2$export$51c2025cefd26e","$058be7baf2d85bd2$export$1ea19b7b0c746bcb","undefined","array","genres","$6Sco9","$40873ecf3c18e122$export$2e2bcd8739ae039","modal","toUpperCase","orgtitle","original_title","popularity","rate","year","i11","modalContent","vote_count","overview","modalContentWrapper","wls","watchedLocalStorage","watchedId","watchButton","includes","indexOf","splice","localStorage","setItem","JSON","stringify","event","key","target"],"version":3,"file":"index.bd763b95.js.map"}