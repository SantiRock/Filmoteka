const e={watchedId:[]},t={queueId:[]};function n(){null===localStorage.getItem("queue")?t.watchedId=[]:t.queueId=JSON.parse(localStorage.getItem("queue")).queueId}function a(){null===localStorage.getItem("watched")?e.watchedId=[]:e.watchedId=JSON.parse(localStorage.getItem("watched")).watchedId}n(),a();var s=function(n){const a=document.querySelector(".modalw"),s=(n.title||n.name).toUpperCase(),l=(n.original_title||n.name).toUpperCase(),o=n.popularity.toFixed(1),d=n.vote_average.toFixed(1),c=n.genres.map((e=>e.name)).join(", "),i=`\n      <div class="modal-header">\n        \n        <button class="modal-close">&times;</button>\n      </div>\n      <div class='poster_container'>\n        <img class="modal-poster" src="https://image.tmdb.org/t/p/w500${n.poster_path}" alt="${n.title}">\n      </div>\n      <div class='info'>\n        <h3 class="modal-title">${s}</h3>\n\n        <table>\n          <tr>\n            <th class='t1'>Vote / Votes</th>\n            <th><span class='films__rate'>${d}</span> / ${n.vote_count}</th>\n          </tr>\n          <tr>\n            <th class='t1'>Popularity</th>\n            <th>${o}</th>\n          </tr>\n          <tr>\n            <th class='t1'>Original Title</th>\n            <th>${l}</th>\n          </tr>\n          <tr>\n            <th class='t1'>Genre</th>\n            <th>${c}</th>\n          </tr>\n        </table>\n          <p>ABOUT</p>\n          <p class='about'>${n.overview}</p>\n          <div class="modal-btns">\n            <button class="btnmodal addw">ADD TO WATCHED</button>\n            <button class="btnmodal addq">ADD TO QUEUE</button>\n        </div>\n      </div>\n    `,r=document.createElement("div");r.innerHTML=i,r.classList.add("modal-content"),a.appendChild(r),a.style.display="flex",r.querySelector(".modal-close").addEventListener("click",(()=>{a.style.display="none",r.remove()}));const m=e.watchedId,u=t.queueId,p=r.querySelector(".addw"),h=r.querySelector(".addq");m.includes(n.id)?(p.classList.add("btnmodal2"),p.classList.remove("btnmodal"),p.textContent="REMOVE FROM WATCHED",p.addEventListener("click",(()=>{const t=m.indexOf(n.id);m.splice(t,1),localStorage.setItem("watched",JSON.stringify(e)),p.classList.add("btnmodal"),p.classList.remove("btnmodal2"),p.textContent="ADD TO WATCHED",window.location.reload(),console.log(localStorage)}))):p.addEventListener("click",(()=>{if(m.push(n.id),localStorage.setItem("watched",JSON.stringify(e)),u.includes(n.id)){const e=u.indexOf(n.id);u.splice(e,1),localStorage.setItem("queue",JSON.stringify(t))}p.classList.add("btnmodal2"),p.classList.remove("btnmodal"),p.textContent="REMOVE FROM WATCHED",window.location.reload(),console.log(localStorage)})),u.includes(n.id)?(h.classList.add("btnmodal2"),h.classList.remove("btnmodal"),h.textContent="REMOVE FROM QUEUE",h.addEventListener("click",(()=>{const e=u.indexOf(n.id);u.splice(e,1),localStorage.setItem("queue",JSON.stringify(t)),h.classList.add("btnmodal"),h.classList.remove("btnmodal2"),h.textContent="ADD TO QUEUE",window.location.reload(),console.log(localStorage)}))):h.addEventListener("click",(()=>{if(u.push(n.id),localStorage.setItem("queue",JSON.stringify(t)),h.classList.add("btnmodal2"),h.classList.remove("btnmodal"),h.textContent="REMOVE FORM QUEUE",m.includes(n.id)){const t=m.indexOf(n.id);m.splice(t,1),localStorage.setItem("watched",JSON.stringify(e))}window.location.reload(),console.log(localStorage)})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&(a.style.display="none",r.remove())})),document.addEventListener("click",(e=>{e.target===a&&(a.style.display="none",r.remove())}))};const l=document.querySelector(".films");var o=function(e){const t=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"https://via.placeholder.com/500x750?text=No+poster+available",n=e.title.toUpperCase(),a=e.vote_average.toFixed(1),o=e.release_date.slice(0,4);let d=e.genres.map((e=>e.name)).join(", ");const c=document.createElement("div");c.classList.add("films__card");let i=`\n    <img class='films__poster' src=${t} alt=${n} loading='lazy' class='poster'>\n    <p class='films__title'>${n}</p>\n    <p class='films__details'>${d} | ${o}</p>\n    <div class='films__rate'>${a}</div>\n    `;c.innerHTML=i,l.appendChild(c),c.addEventListener("click",(()=>{s(e)}))};const d=document.querySelector(".watched"),c=document.querySelector(".queue"),i=document.querySelector(".films"),r=document.querySelector(".msn"),m=document.querySelector(".pages"),u=document.querySelector(".screen");console.log(localStorage),n(),a();let p=t.queueId,h=e.watchedId;p=null===localStorage.getItem("queue")?[]:JSON.parse(localStorage.getItem("queue")).queueId,h=null===localStorage.getItem("watched")?[]:JSON.parse(localStorage.getItem("watched")).watchedId;function g(e,t){if(0===e.length)r.textContent="No movies have been added to Watched list yet";else{const n=12*(t-1),a=n+12,s=e.slice(n,a);i.innerHTML="",s.forEach((e=>{u.style.display="flex",fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=0a3a4e00d84de20a8f1b6dfc8a7cdfd5&language=en-US`).then((e=>e.json())).then((e=>o(e))).catch((e=>console.error(e))).finally((()=>u.style.display="none"))})),E(h,v,1)}}const v=Math.ceil(h.length/12),L=Math.ceil(p.length/12),E=(e,t,n)=>{m.innerHTML="";const a=document.createElement("button");a.textContent="←",a.classList.add("pagebtn"),a.disabled=1===n,a.addEventListener("click",(()=>{n--,g(e,n),E(e,t,n)})),m.append(a);const s=document.createElement("button");s.textContent="1",s.classList.add("page"),s.disabled=1===n,s.addEventListener("click",(()=>{g(e,n=1),E(e,t,n)})),m.append(s);const l=document.createElement("div");l.textContent="...",l.classList.add("dots"),m.append(l);const o=Math.max(n-Math.floor(2.5),1),d=Math.max(n-5+1,1),c=Math.max(n-5+2,1);let i;i=n===t?d:n===t-1?c:o;const r=Math.min(i+5-1,t);for(let a=i;a<=r;a++){const s=document.createElement("button");s.classList.add("page"),s.textContent=a,s.disabled=a===n,a===n?s.classList.add("activePage"):s.classList.remove("activePage"),s.addEventListener("click",(()=>{g(e,n=a),E(e,t,n)})),m.append(s)}const u=document.createElement("div");u.textContent="...",u.classList.add("dots"),m.append(u);const p=document.createElement("button");p.textContent=t,p.classList.add("page"),p.disabled=n===t,p.addEventListener("click",(()=>{g(e,n=t),E(e,t,n)})),m.append(p);const h=document.createElement("button");h.textContent="→",h.classList.add("pagebtn"),h.disabled=n===t,h.addEventListener("click",(()=>{n++,g(e,n),E(e,t,n)})),m.append(h)};d.addEventListener("click",(e=>{e.preventDefault(),d.classList.add("selected"),c.classList.remove("selected"),0===h.length?(i.innerHTML="",r.textContent="No movies have been added to Watched list yet",m.innerHTML=""):(g(h,1),E(h,v,1))})),c.addEventListener("click",(e=>{e.preventDefault(),c.classList.add("selected"),d.classList.remove("selected"),0===p.length?(i.innerHTML="",r.textContent="No movies have been added to Queue list yet",m.innerHTML=""):(g(p,1),E(p,L,1))})),m.innerHTML="",g(h,1);
//# sourceMappingURL=mylibrary.93dd1ba8.js.map
