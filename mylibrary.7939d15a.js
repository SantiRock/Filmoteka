const e={watchedId:[]},t={queueId:[]};function n(){null===localStorage.getItem("queue")?t.watchedId=[]:t.queueId=JSON.parse(localStorage.getItem("queue")).queueId}function a(){null===localStorage.getItem("watched")?e.watchedId=[]:e.watchedId=JSON.parse(localStorage.getItem("watched")).watchedId}n(),a();var d=function(n){const a=document.querySelector(".modalw"),d=n.title;console.log(d);const s=n.popularity.toFixed(1),l=n.vote_average.toFixed(1),c=n.genres.map((e=>e.name)).join(", "),o=`\n      <div class="modal-header">\n        \n        <button class="modal-close">&times;</button>\n      </div>\n      <div class='poster_container'>\n        <img class="modal-poster" src="https://image.tmdb.org/t/p/w500${n.poster_path}" alt="${n.title}">\n      </div>\n      <div class='info'>\n        <h3 class="modal-title">${d}</h3>\n\n        <table>\n          <tr>\n            <th class='t1'>Vote / Votes</th>\n            <th><span class='films__rate'>${l}</span> / ${n.vote_count}</th>\n          </tr>\n          <tr>\n            <th class='t1'>Popularity</th>\n            <th>${s}</th>\n          </tr>\n          <tr>\n            <th class='t1'>Original Title</th>\n            <th>${n.original_title}</th>\n          </tr>\n          <tr>\n            <th class='t1'>Genre</th>\n            <th>${c}</th>\n          </tr>\n        </table>\n          <p>ABOUT</p>\n          <p class='about'>${n.overview}</p>\n          <div class="modal-btns">\n            <button class="addw">ADD TO WATCHED</button>\n            <button class="addq">ADD TO QUEUE</button>\n        </div>\n      </div>\n    `,i=document.createElement("div");i.innerHTML=o,i.classList.add("modal-content"),a.appendChild(i),a.style.display="flex",i.querySelector(".modal-close").addEventListener("click",(()=>{a.style.display="none",i.remove()}));const r=e.watchedId,u=t.queueId,m=i.querySelector(".addw");r.includes(n.id)&&(m.style.backgroundColor="rgba(255, 107, 1, 0.5)"),u.includes(n.id),m.disabled=r.includes(n.id),m.addEventListener("click",(()=>{r.push(n.id),localStorage.setItem("watched",JSON.stringify(e)),m.style.backgroundColor="rgba(255, 107, 1, 0.5)",m.disabled=r.includes(n.id),p.disabled=u.includes(n.id)||r.includes(n.id),console.log(localStorage)}));const p=i.querySelector(".addq");p.disabled=u.includes(n.id)||r.includes(n.id),p.addEventListener("click",(()=>{u.push(n.id),localStorage.setItem("queue",JSON.stringify(t)),p.disabled=u.includes(n.id)||r.includes(n.id),console.log(localStorage)})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&(a.style.display="none",i.remove())})),document.addEventListener("click",(e=>{e.target===a&&(a.style.display="none",i.remove())}))};const s=document.querySelector(".films");var l=function(e){const t=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"https://via.placeholder.com/500x750?text=No+poster+available",n=e.title.toUpperCase(),a=e.vote_average.toFixed(1),l=e.release_date.slice(0,4);let c=e.genres.map((e=>e.name)).join(", ");const o=document.createElement("div");o.classList.add("films__card");let i=`\n    <img class='films__poster' src=${t} alt=${n} loading='lazy' class='poster'>\n    <p class='films__title'>${n}</p>\n    <p class='films__details'>${c} | ${l}</p>\n    <div class='films__rate'>${a}</div>\n    `;o.innerHTML=i,s.appendChild(o),o.addEventListener("click",(()=>{d(e)}))};const c=document.querySelector(".watched"),o=document.querySelector(".queue"),i=document.querySelector(".films"),r=document.querySelector(".msn"),u=document.querySelector(".pages"),m=document.querySelector(".screen");console.log(localStorage),n(),a();let p=t.queueId,h=e.watchedId;p=null===localStorage.getItem("queue")?[]:JSON.parse(localStorage.getItem("queue")).queueId,h=null===localStorage.getItem("watched")?[]:JSON.parse(localStorage.getItem("watched")).watchedId;function g(e,t){if(0===e.length)r.textContent="No movies have been added to Watched list yet";else{const n=12*(t-1),a=n+12,d=e.slice(n,a);i.innerHTML="",d.forEach((e=>{m.style.display="flex",fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=0a3a4e00d84de20a8f1b6dfc8a7cdfd5&language=en-US`).then((e=>e.json())).then((e=>l(e))).catch((e=>console.error(e))).finally((()=>m.style.display="none"))})),y(h,v,1)}}const v=Math.ceil(h.length/12),b=Math.ceil(p.length/12),y=(e,t,n)=>{u.innerHTML="";const a=document.createElement("button");a.textContent="←",a.classList.add("pagebtn"),a.disabled=1===n,a.addEventListener("click",(()=>{n--,g(e,n),y(e,t,n)})),u.append(a);const d=document.createElement("button");d.textContent="1",d.classList.add("page"),d.disabled=1===n,d.addEventListener("click",(()=>{g(e,n=1),y(e,t,n)})),u.append(d);const s=document.createElement("div");s.textContent="...",s.classList.add("dots"),u.append(s);const l=Math.max(n-Math.floor(2.5),1),c=Math.max(n-5+1,1),o=Math.max(n-5+2,1);let i;i=n===t?c:n===t-1?o:l;const r=Math.min(i+5-1,t);for(let a=i;a<=r;a++){const d=document.createElement("button");d.classList.add("page"),d.textContent=a,d.disabled=a===n,a===n?d.classList.add("activePage"):d.classList.remove("activePage"),d.addEventListener("click",(()=>{g(e,n=a),y(e,t,n)})),u.append(d)}const m=document.createElement("div");m.textContent="...",m.classList.add("dots"),u.append(m);const p=document.createElement("button");p.textContent=t,p.classList.add("page"),p.disabled=n===t,p.addEventListener("click",(()=>{g(e,n=t),y(e,t,n)})),u.append(p);const h=document.createElement("button");h.textContent="→",h.classList.add("pagebtn"),h.disabled=n===t,h.addEventListener("click",(()=>{n++,g(e,n),y(e,t,n)})),u.append(h)};c.addEventListener("click",(e=>{e.preventDefault(),c.classList.add("selected"),o.classList.remove("selected"),0===h.length?(i.innerHTML="",r.textContent="No movies have been added to Watched list yet",u.innerHTML=""):(g(h,1),y(h,v,1))})),o.addEventListener("click",(e=>{e.preventDefault(),o.classList.add("selected"),c.classList.remove("selected"),0===p.length?(i.innerHTML="",r.textContent="No movies have been added to Queue list yet",u.innerHTML=""):(g(p,1),y(p,b,1))})),u.innerHTML="",g(h,1);
//# sourceMappingURL=mylibrary.7939d15a.js.map
