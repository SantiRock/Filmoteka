{"mappings":"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","sources":["src/js/modal-library.js","src/js/librarycard.js","src/js/mylibrary.js"],"sourcesContent":["import { watchedLocalStorage } from \"./localstorage\";\n\n\nfunction displayMovieDetails(movie) {\n  const modal = document.querySelector(\".modalw\");\n  const title1 = movie.title || movie.name;\n  const title = title1.toUpperCase();\n  const orgtitle1 = movie.original_title || movie.name;\n  const orgtitle = orgtitle1.toUpperCase();\n  //const orgtitle = 'hello'; \n  const popularity = movie.popularity.toFixed(1);\n  const rate = movie.vote_average.toFixed(1);\n  const genres = movie.genres.map(genre => genre.name).join(', ');\n    \n    const modalContent = `\n      <div class=\"modal-header\">\n        \n        <button class=\"modal-close\">&times;</button>\n      </div>\n      <div class='poster_container'>\n        <img class=\"modal-poster\" src=\"https://image.tmdb.org/t/p/w500${\n          movie.poster_path\n        }\" alt=\"${movie.title}\">\n      </div>\n      <div class='info'>\n        <h3 class=\"modal-title\">${title}</h3>\n\n        <table>\n          <tr>\n            <th class='t1'>Vote / Votes</th>\n            <th><span class='films__rate'>${rate}</span> / ${movie.vote_count}</th>\n          </tr>\n          <tr>\n            <th class='t1'>Popularity</th>\n            <th>${popularity}</th>\n          </tr>\n          <tr>\n            <th class='t1'>Original Title</th>\n            <th>${orgtitle}</th>\n          </tr>\n          <tr>\n            <th class='t1'>Genre</th>\n            <th>${genres}</th>\n          </tr>\n        </table>\n          <p>ABOUT</p>\n          <p class='about'>${movie.overview}</p>\n          <div class=\"modal-btns\">\n            <button class=\"btnmodal2 addw\">REMOVE FROM LIBRARY</button>\n        </div>\n      </div>\n    `;\n\n    const modalContentWrapper = document.createElement(\"div\");\n    modalContentWrapper.innerHTML = modalContent;\n    modalContentWrapper.classList.add(\"modal-content\");\n    modal.appendChild(modalContentWrapper);\n    modal.style.display = \"flex\";\n  \n    const closeButton = modalContentWrapper.querySelector(\".modal-close\");\n    closeButton.addEventListener(\"click\", () => {\n      modal.style.display = \"none\";\n      modalContentWrapper.remove();\n    });\n\n    const wls = watchedLocalStorage.watchedId;\n  \n    const watchButton = modalContentWrapper.querySelector(\".addw\");\n\n\n      watchButton.addEventListener('click', () => {\n        const i = wls.indexOf(movie.id);\n        wls.splice(i, 1);\n        localStorage.setItem('watched', JSON.stringify(watchedLocalStorage));\n        watchButton.classList.add('btnmodal')\n        watchButton.classList.remove('btnmodal2');\n        window.location.reload();\n      });\n\n    document.addEventListener('keydown', event => {\n      if (event.key === 'Escape') {\n        modal.style.display = 'none';\n        modalContentWrapper.remove();\n      }\n    });\n\n    document.addEventListener('click', (event) => {\n      if (event.target === modal) {\n        modal.style.display = 'none';\n        modalContentWrapper.remove();\n      }\n    })\n  }\n\n  \n  export default displayMovieDetails;","import displayMovieDetails from './modal-library';\n\nconst films = document.querySelector('.films');\n\nfunction renderFilms(film) {\n    const baseUrl = 'https://image.tmdb.org/t/p/';\n    const posterSize = 'w500';\n    // 'w92', 'w185', 'w500',\n    const posterPath = film.poster_path ? `https://image.tmdb.org/t/p/w500${film.poster_path}` \n        : 'https://via.placeholder.com/500x750?text=No+poster+available';\n    const title = film.title.toUpperCase();\n    const rate = film.vote_average.toFixed(1);\n    const year = film.release_date.slice(0,4);\n    let genres = film.genres.map(genre => genre.name).join(', ');\n\n    const card = document.createElement('div');\n    card.classList.add('films__card');\n   \n    let markup = `\n    <img class='films__poster' src=${posterPath} alt=${title} loading='lazy' class='poster'>\n    <p class='films__title'>${title}</p>\n    <p class='films__details'>${genres} | ${year}</p>\n    <div class='films__rate'>${rate}</div>\n    `;\n    card.innerHTML = markup;\n\n    films.appendChild(card);\n    card.addEventListener(\"click\", () => {\n        displayMovieDetails(film);\n    })\n};\n\nexport default renderFilms;","require('dotenv').config();\nimport '../sass/index.scss';\nimport renderFilms from './librarycard';\n//import pagination from './pagination';\nimport { watchedLocalStorage, getLocalw } from \"./localstorage\";\n\n// DOM -----\nconst films = document.querySelector('.films');\nconst msn = document.querySelector('.msn');\nconst pages = document.querySelector('.pages');\nconst screen = document.querySelector('.screen');\nconst itemsPerPage = 12;\nlet currentPage = 1;\n\n//console.log(localStorage);\ngetLocalw();\n\n//console.log(watchedLocalStorage.watchedId);\nlet watchedIds = watchedLocalStorage.watchedId;\n\n\nif (localStorage.getItem('watched') === null) {\n    watchedIds = [];\n} else {\n watchedIds = JSON.parse(localStorage.getItem('watched')).watchedId;\n};\n\n\n\n// Local Storage Manage  ---\n\nconst apiKey = process.env.API_KEY;\n\n\nfunction getLocalStorage(arr, page) {\n    if (arr.length === 0 ) {\n        msn.textContent = 'No movies have been added to Watched list yet';\n    } else {\n        const startIndex = (page - 1) * itemsPerPage;\n        const endIndex = startIndex + itemsPerPage;\n        const itemsToDisplay = arr.slice(startIndex, endIndex);\n        films.innerHTML = '';\n        itemsToDisplay.forEach(movie_id => {\n            screen.style.display = 'flex';\n            fetch(`https://api.themoviedb.org/3/movie/${movie_id}?api_key=${apiKey}&language=en-US`)\n            .then(response => response.json())\n            .then(film => renderFilms(film))\n            .catch(error => console.error(error))\n            .finally(() => screen.style.display = 'none')\n        })\n        pagination(watchedIds, totalPagesW, currentPage);       \n    }\n}\n\n//Pages\nconst totalPagesW = Math.ceil(watchedIds.length / itemsPerPage);\n\n// Pagination\n\nconst pagesToShow = 5;\n\nconst pagination = (arr, totalPages, currentPage) => {\n    pages.innerHTML = '';\n\n    const prevBtn = document.createElement('button');\n    prevBtn.textContent = '←';\n    //prevBtn.innerHTML = markup;\n    prevBtn.classList.add('pagebtn');\n    prevBtn.disabled = currentPage === 1;\n    prevBtn.addEventListener('click', () => {\n        currentPage--;\n        getLocalStorage(arr, currentPage);\n        pagination(arr, totalPages, currentPage);\n    });\n    pages.append(prevBtn);\n\n    if( currentPage > 3) {\n        const first = document.createElement('button');\n        first.textContent = '1';\n        first.classList.add('page');\n        first.addEventListener('click', () => {\n            currentPage = 1;\n            getLocalStorage(arr, currentPage);\n            pagination(arr, totalPages, currentPage);\n        });\n        pages.append(first);\n    }\n    \n    if( currentPage > 4) {\n        const dots = document.createElement('div');\n        dots.textContent = '...';\n        dots.classList.add('dots');\n        pages.append(dots);\n    }\n\n    const st1 = Math.max(currentPage - Math.floor(pagesToShow/2), 1);\n    const st2 = Math.max(currentPage - pagesToShow + 1, 1);\n    const st3 = Math.max(currentPage - pagesToShow + 2, 1);\n\n    let startPage;\n    currentPage === totalPages ? startPage = st2 \n    : currentPage === totalPages - 1 ? startPage = st3 : startPage = st1;\n    \n    const endPage = Math.min(startPage + pagesToShow - 1, totalPages);\n    for(let i = startPage; i <= endPage; i++) {\n      const pageButton = document.createElement('button');\n      pageButton.classList.add('page');\n      pageButton.textContent = i;\n      pageButton.disabled = i === currentPage;\n\n      i === currentPage ? pageButton.classList.add('activePage') : pageButton.classList.remove('activePage');\n\n      pageButton.addEventListener('click', () => {\n        currentPage = i;\n        getLocalStorage(arr, currentPage);\n        pagination(arr, totalPages, currentPage);\n      });\n      pages.append(pageButton);\n    };\n\n    if(currentPage < totalPages - 3) {\n        const dots1 = document.createElement('div');\n        dots1.textContent = '...';\n        dots1.classList.add('dots');\n        pages.append(dots1);\n    }\n\n    if(currentPage < totalPages - 2) {\n        const last = document.createElement('button');\n        last.textContent = totalPages;\n        last.classList.add('page');\n        last.addEventListener('click', () => {\n            currentPage = totalPages;\n            getLocalStorage(arr, currentPage);\n            pagination(arr, totalPages, currentPage);\n        });\n        pages.append(last);\n    }\n\n    const nextBtn = document.createElement('button');\n    nextBtn.textContent = '→';\n    nextBtn.classList.add('pagebtn');\n    nextBtn.disabled = currentPage === totalPages;\n    nextBtn.addEventListener('click', () => {\n        currentPage++;\n        getLocalStorage(arr, currentPage);\n        pagination(arr, totalPages, currentPage);\n    });\n    pages.append(nextBtn);\n}\n\n\n// Event Listeners ---\n\n\n// Render by default\n\npages.innerHTML = '';\ngetLocalStorage(watchedIds, currentPage);\n\n\n// Tests\n/*\n const url = `https://api.themoviedb.org/3/trending/all/day?api_key=${apiKey}`;\n fetch(url)\n .then(response => response.json())\n .then(data => getID(data.results))\n .catch(error => console.error(error));\n\nfunction getID(data) {\n    data.forEach(film => console.log(film.id))\n}\n*/\n\n"],"names":["$6Sco9","parcelRequire","$5274909fd9dfb2b1$export$2e2bcd8739ae039","movie","modal","document","querySelector","title","name","toUpperCase","orgtitle","original_title","popularity","toFixed","rate","vote_average","genres","map","genre","join","modalContent","concat","poster_path","vote_count","overview","modalContentWrapper","createElement","innerHTML","classList","add","appendChild","style","display","addEventListener","remove","wls","watchedLocalStorage","watchedId","watchButton","i","indexOf","id","splice","localStorage","setItem","JSON","stringify","window","location","reload","event","key","target","$4a3bab806eab21c8$var$films","$4a3bab806eab21c8$export$2e2bcd8739ae039","film","posterPath","year","release_date","slice","card","markup","config","$ab5c4f364fa41332$var$films","$ab5c4f364fa41332$var$msn","$ab5c4f364fa41332$var$pages","$ab5c4f364fa41332$var$screen","getLocalw","$ab5c4f364fa41332$var$watchedIds","getItem","parse","$ab5c4f364fa41332$var$getLocalStorage","arr","page","length","textContent","startIndex","endIndex","itemsToDisplay","forEach","movie_id","fetch","undefined","then","response","json","catch","error","console","finally","$ab5c4f364fa41332$var$pagination","$ab5c4f364fa41332$var$totalPagesW","Math","ceil","totalPages","currentPage1","pageButton","disabled","append","prevBtn","first","dots","startPage","st1","max","floor","$ab5c4f364fa41332$var$pagesToShow","st2","st3","endPage","min","i1","_loop","dots1","last","nextBtn"],"version":3,"file":"mylibrary.fe0ea91f.js.map"}